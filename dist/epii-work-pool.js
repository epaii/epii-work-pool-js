!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.WorkPool=e():t.WorkPool=e()}(this,(()=>(()=>{"use strict";var t={};return{138:function(t,e){var o=this&&this.__awaiter||function(t,e,o,i){return new(o||(o=Promise))((function(s,n){function r(t){try{c(i.next(t))}catch(t){n(t)}}function u(t){try{c(i.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,u)}c((i=i.apply(t,e||[])).next())}))};function i(t){return new Promise((e=>setTimeout(e,t)))}Object.defineProperty(e,"__esModule",{value:!0}),e.defaultWorkPools=e.WorkPools=void 0;class s{constructor(t=10,e=50){this.size=t,this.interval=e,this.useSize=0,this.tasks=[],this.__watch()}__watch(){return o(this,void 0,void 0,(function*(){for(;;)this.useSize<this.size&&this.tasks.length>0?(this.useSize++,this.tasks.shift()()):yield i(this.interval)}))}doTask(t,e="push"){return new Promise(((i,s)=>{this.tasks[e]((()=>o(this,void 0,void 0,(function*(){try{i(yield t()),this.useSize--}catch(t){s(t),this.useSize--}}))))}))}static createWorkPools(t,e=50){return new s(t,e)}}let n;e.WorkPools=s,e.defaultWorkPools=function(t=10,e=50){return n||(n=s.createWorkPools(t,e)),n}}}[138](0,t),t})()));